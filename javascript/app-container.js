(function(){var root,_Container;root=typeof exports!="undefined"&&exports!==null?exports:this,root.Container=function(){function Container(){}var _instance;return _instance=void 0,Container.get=function(args){return _instance!=null?_instance:_instance=new _Container(args)},Container}(),root.$c=Container.get,_Container=function(){function _Container(args){this.args=args,!window.jQuery||($.ajaxSetup({cache:!0}),$.getScript(""+container_domain+container_rel+"/all.min.js",function(){var setHeight;return parent_url=decodeURIComponent(document.location.hash.replace(/^#/,"")),parent_url==null||parent_url===""?parent_url=$.cookie("parent_url"):$.cookie("parent_url",parent_url),(parent_url==null||parent_url==="")&&$("script").each(function(){var src;if($(this).attr("src")&&$(this).attr("src").indexOf(container_domain)!==-1){src=$(this).attr("src").split("?");if(src.length===2)return parent_url=container_domain+"/appbase/app/"+src[1]}}),$.postMessage({current_location:encodeURIComponent(document.location)},parent_url,parent),setHeight=function(){return $.postMessage({iframe_height:$("body").outerHeight(!0)},parent_url,parent)},setHeight(),$(window).resize(function(){var resizeTimer;return clearTimeout(resizeTimer),resizeTimer=setTimeout(setHeight,1e3/refresh_rate)}),$.receiveMessage(function(e){return Container.get().onMessageReceived(e)}),$(window).trigger("containerReady")}))}var appID,container_domain,container_rel,eventCallbacks,parent_url,refresh_rate;return container_domain="https://www.ost.pt",container_rel="/js/apps/libs",refresh_rate=30,parent_url="",_Container.prototype.enable=function(event){switch(event){case"onpushstate":if(window.history)return function(history){var pushState;return pushState=history.pushState,history.pushState=function(state){return typeof history.onpushstate=="function"&&history.onpushstate({state:state}),pushState.apply(history,arguments),$(window).trigger("pushstate")}}(window.history),$(window).bind("pushstate",function(e){var url;return url=encodeURIComponent(document.location),$.postMessage({current_location:url},parent_url,parent)});break;case"onhashchange":return $(window).bind("hashchange",function(e){var url;return url=(""+document.location).replace("#","/"),url=encodeURIComponent(url),$.postMessage({current_location:url},parent_url,parent)});case"onheightchange":return $("body").resize(function(){return $.postMessage({iframe_height:$("body").outerHeight(!0)},parent_url,parent)})}},_Container.prototype.postMessage=function(id,method,params,hasCallback){var args;return method==null&&(method=!1),params==null&&(params=!1),hasCallback==null&&(hasCallback=!1),method?(args=JSON.stringify({id:id,method:method,params:params,callback:hasCallback}),$.postMessage(args,parent_url,parent),!0):(args=id,$.postMessage(args,parent_url,parent),!0)},appID="default",eventCallbacks={},_Container.prototype.services=function(method,params,callback){var hasCallback,id;return callback==null&&(callback=!1),method?(hasCallback=this.isFunction(callback),id=this.generateUUID(),callback&&this.storeCallback(""+method+"+"+id,callback),this.postMessage(id,method,params,hasCallback),!0):!1},_Container.prototype.onMessageReceived=function(event){var callback,data,id,method,params;try{data=JSON.parse(event.data),method=data.event||data.method,id=data.id}catch(error){}return event.origin!==container_domain?!1:(callback=this.getCallback(""+method+"+"+id,appID),callback?(params=[],data.value!==undefined&&params.push(data.value),data.data&&params.push(data.data),appID&&params.push(appID),params.length>0?callback.apply(null,params):callback.call()):!1)},_Container.prototype.storeCallback=function(eventName,callback){return appID?(eventCallbacks[appID]||(eventCallbacks[appID]={}),eventCallbacks[appID][eventName]=callback):eventCallbacks[eventName]=callback},_Container.prototype.getCallback=function(eventName,appID){return appID?eventCallbacks[appID][eventName]:eventCallbacks[eventName]},_Container.prototype.removeCallback=function(eventName,appID){if(appID&&eventCallbacks[appID]){if(!eventCallbacks[appID][eventName])return!1;eventCallbacks[appID][eventName]=null}else{if(!eventCallbacks[eventName])return!1;eventCallbacks[eventName]=null}return!0},_Container.prototype.isFunction=function(obj){return!!(obj&&obj.constructor&&obj.call&&obj.apply)},_Container.prototype.isArray=function(obj){return toString.call(obj)==="[object Array]"},_Container.prototype.generateUUID=function(){var d;return d=(new Date).getTime(),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(c){var r;return r=(d+Math.random()*16)%16|0,d=d/16|0,(c==="x"?r:r&7|8).toString(16)})},_Container}(),root.Container.get()}).call(this)